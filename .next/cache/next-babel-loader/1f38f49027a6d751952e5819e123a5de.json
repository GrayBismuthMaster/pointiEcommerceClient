{"ast":null,"code":"var __jsx = React.createElement;\nimport { gql, useMutation } from '@apollo/client';\nimport router from 'next/router';\nimport React from 'react';\nimport Swal from 'sweetalert2';\nconst ELIMINAR_PRODUCTO = gql`\n    mutation eliminarProducto($id : ID!) {\n        eliminarProducto(id : $id)\n    }\n`;\nconst OBTENER_PRODUCTOS = gql`\n    query obtenerProductos{\n        obtenerProductos{\n            id\n            nombre\n            precio\n            existencia\n        }\n    }\n`;\n\nconst Producto = ({\n  producto\n}) => {\n  const {\n    id,\n    nombre,\n    precio,\n    existencia\n  } = producto; //Mutation para eliminar productos\n\n  const [eliminarProducto] = useMutation(ELIMINAR_PRODUCTO, {\n    update(cache) {\n      const {\n        obtenerProductos\n      } = cache.readQuery({\n        query: OBTENER_PRODUCTOS\n      });\n      cache.writeQuery({\n        query: OBTENER_PRODUCTOS,\n        data: {\n          obtenerProductos: obtenerProductos.filter(productoActual => productoActual.id !== id)\n        }\n      });\n    }\n\n  });\n\n  const confirmarEliminarProducto = id => {\n    Swal.fire({\n      title: `¿Estás seguro de eliminar el producto ${nombre}?`,\n      text: \"No se podrá deshacer esta acción\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Si, bórralo!',\n      cancelButtonText: 'No, cancélalo'\n    }).then(async result => {\n      if (result.isConfirmed) {\n        try {\n          //Eliminar por id \n          //Data es la respuesta del servidor\n          const {\n            data\n          } = await eliminarProducto({\n            variables: {\n              id\n            }\n          });\n          console.log(data); //Mostrar una alerta\n\n          Swal.fire('Producto ELiminado!', data.eliminarProducto, 'success');\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    });\n  };\n\n  const editarProducto = () => {\n    router.push({\n      pathname: \"/editarProducto/[id]\",\n      query: {\n        id\n      }\n    });\n  };\n\n  return __jsx(\"tr\", null, __jsx(\"td\", {\n    className: \"border px-4 py-2\"\n  }, nombre), __jsx(\"td\", {\n    className: \"border px-4 py-2\"\n  }, existencia, \" Piezas\"), __jsx(\"td\", {\n    className: \"border px-4 py-2\"\n  }, \"$ \", precio), __jsx(\"td\", {\n    className: \"border px-4 py-2\"\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"flex justify-center items-center bg-red-800 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold\",\n    onClick: () => confirmarEliminarProducto(id)\n  }, \"Eliminar\", __jsx(\"svg\", {\n    className: \"w-4 h-4 ml-2\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: \"2\",\n    d: \"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"\n  })))), __jsx(\"td\", {\n    className: \"border px-4 py-2\"\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"flex justify-center items-center bg-green-600 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold\",\n    onClick: () => editarProducto(id)\n  }, \"Editar\", __jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"h-4 w-4 ml-2\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\"\n  }, __jsx(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\"\n  })))));\n};\n\nexport default Producto;","map":null,"metadata":{},"sourceType":"module"}