{"ast":null,"code":"import jwtDecode from 'jwt-decode';\nconst ACCESS_TOKEN_KEY = 'token';\nconst API_URL = 'http://localhost:9000';\nconst ISSERVER = true;\nexport function getAccessToken() {\n  if (!ISSERVER) {\n    return localStorage.getItem(ACCESS_TOKEN_KEY);\n  }\n}\nexport function getUser() {\n  if (!ISSERVER) {\n    const token = getAccessToken();\n    console.log(\"desde el getUser\", token);\n\n    if (!token) {\n      return null;\n    }\n\n    return getUserFromToken(token);\n  }\n}\nexport async function login(userId, password) {\n  const response = await fetch(`${API_URL}/login`, {\n    method: 'POST',\n    headers: {\n      'content-type': 'application/json'\n    },\n    body: JSON.stringify({\n      userId,\n      password\n    })\n  });\n\n  if (response.ok) {\n    const {\n      token\n    } = await response.json();\n    await localStorage.setItem(ACCESS_TOKEN_KEY, token);\n    return {\n      id: userId\n    };\n  }\n\n  return null;\n}\nexport function logout() {\n  localStorage.removeItem(ACCESS_TOKEN_KEY);\n}\n\nfunction getUserFromToken(token) {\n  if (!ISSERVER) {\n    console.log(\"desde el getUserFromToken\", token);\n    const jwtPayload = jwtDecode(token);\n    console.log(jwtPayload.sub);\n    return {\n      usuario: {\n        id: jwtPayload.sub\n      }\n    };\n  }\n}","map":null,"metadata":{},"sourceType":"module"}