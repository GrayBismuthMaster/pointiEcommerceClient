{"ast":null,"code":"import _regeneratorRuntime from \"D:/Cursos/FrontEnd Javascript/Next/React Avanzado Fullstack Next.js, Apollo, MongoDB y GraphQL/Ejercicios/cliente/clientecrm/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/Cursos/FrontEnd Javascript/Next/React Avanzado Fullstack Next.js, Apollo, MongoDB y GraphQL/Ejercicios/cliente/clientecrm/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:/Cursos/FrontEnd Javascript/Next/React Avanzado Fullstack Next.js, Apollo, MongoDB y GraphQL/Ejercicios/cliente/clientecrm/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"D:/Cursos/FrontEnd Javascript/Next/React Avanzado Fullstack Next.js, Apollo, MongoDB y GraphQL/Ejercicios/cliente/clientecrm/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\Cursos\\\\FrontEnd Javascript\\\\Next\\\\React Avanzado Fullstack Next.js, Apollo, MongoDB y GraphQL\\\\Ejercicios\\\\cliente\\\\clientecrm\\\\components\\\\Producto.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    query obtenerProductos{\\n        obtenerProductos{\\n            id\\n            nombre\\n            precio\\n            existencia\\n        }\\n    }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    mutation eliminarProducto($id : ID!) {\\n        eliminarProducto(id : $id)\\n    }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { gql, useMutation } from '@apollo/client';\nimport router from 'next/router';\nimport React from 'react';\nimport Swal from 'sweetalert2';\nvar ELIMINAR_PRODUCTO = gql(_templateObject());\nvar OBTENER_PRODUCTOS = gql(_templateObject2());\n\nvar Producto = function Producto(_ref) {\n  _s();\n\n  var producto = _ref.producto;\n  var id = producto.id,\n      nombre = producto.nombre,\n      precio = producto.precio,\n      existencia = producto.existencia; //Mutation para eliminar productos\n\n  var _useMutation = useMutation(ELIMINAR_PRODUCTO, {\n    update: function update(cache) {\n      var _cache$readQuery = cache.readQuery({\n        query: OBTENER_PRODUCTOS\n      }),\n          obtenerProductos = _cache$readQuery.obtenerProductos;\n\n      cache.writeQuery({\n        query: OBTENER_PRODUCTOS,\n        data: {\n          obtenerProductos: obtenerProductos.filter(function (productoActual) {\n            return productoActual.id !== id;\n          })\n        }\n      });\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      eliminarProducto = _useMutation2[0];\n\n  var confirmarEliminarProducto = function confirmarEliminarProducto(id) {\n    Swal.fire({\n      title: \"\\xBFEst\\xE1s seguro de eliminar el producto \".concat(nombre, \"?\"),\n      text: \"No se podrá deshacer esta acción\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Si, bórralo!',\n      cancelButtonText: 'No, cancélalo'\n    }).then( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(result) {\n        var _yield$eliminarProduc, data;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!result.isConfirmed) {\n                  _context.next = 13;\n                  break;\n                }\n\n                _context.prev = 1;\n                _context.next = 4;\n                return eliminarProducto({\n                  variables: {\n                    id: id\n                  }\n                });\n\n              case 4:\n                _yield$eliminarProduc = _context.sent;\n                data = _yield$eliminarProduc.data;\n                console.log(data); //Mostrar una alerta\n\n                Swal.fire('Producto ELiminado!', data.eliminarProducto, 'success');\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](1);\n                console.log(_context.t0);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 10]]);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n  };\n\n  var editarProducto = function editarProducto() {\n    router.push({\n      pathname: \"/editarproducto/[id]\",\n      query: {}\n    });\n  };\n\n  return __jsx(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }\n  }, __jsx(\"td\", {\n    className: \"border px-4 py-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, nombre), __jsx(\"td\", {\n    className: \"border px-4 py-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, existencia, \" Piezas\"), __jsx(\"td\", {\n    className: \"border px-4 py-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, \"$ \", precio), __jsx(\"td\", {\n    className: \"border px-4 py-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"flex justify-center items-center bg-red-800 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold\",\n    onClick: function onClick() {\n      return confirmarEliminarProducto(id);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, \"Eliminar\", __jsx(\"svg\", {\n    className: \"w-4 h-4 ml-2\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 17\n    }\n  }, __jsx(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: \"2\",\n    d: \"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 136\n    }\n  })))), __jsx(\"td\", {\n    className: \"border px-4 py-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"flex justify-center items-center bg-green-600 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold\",\n    onClick: function onClick() {\n      return editarProducto(id);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, \"Editar\", __jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"h-4 w-4 ml-2\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, __jsx(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }\n  })))));\n};\n\n_s(Producto, \"E3qzXg5wTE8/esVo0IhH1DO6VnU=\", false, function () {\n  return [useMutation];\n});\n\n_c = Producto;\nexport default Producto;\n\nvar _c;\n\n$RefreshReg$(_c, \"Producto\");","map":{"version":3,"sources":["D:/Cursos/FrontEnd Javascript/Next/React Avanzado Fullstack Next.js, Apollo, MongoDB y GraphQL/Ejercicios/cliente/clientecrm/components/Producto.js"],"names":["gql","useMutation","router","React","Swal","ELIMINAR_PRODUCTO","OBTENER_PRODUCTOS","Producto","producto","id","nombre","precio","existencia","update","cache","readQuery","query","obtenerProductos","writeQuery","data","filter","productoActual","eliminarProducto","confirmarEliminarProducto","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","then","result","isConfirmed","variables","console","log","editarProducto","push","pathname"],"mappings":"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","sourcesContent":["import { gql, useMutation } from '@apollo/client';\r\nimport router from 'next/router';\r\nimport React from 'react'\r\nimport Swal from 'sweetalert2'\r\n\r\nconst ELIMINAR_PRODUCTO = gql`\r\n    mutation eliminarProducto($id : ID!) {\r\n        eliminarProducto(id : $id)\r\n    }\r\n`\r\nconst OBTENER_PRODUCTOS = gql`\r\n    query obtenerProductos{\r\n        obtenerProductos{\r\n            id\r\n            nombre\r\n            precio\r\n            existencia\r\n        }\r\n    }\r\n`\r\nconst Producto = ({producto}) => {\r\n    const {id, nombre, precio, existencia} = producto;\r\n\r\n    //Mutation para eliminar productos\r\n    const [eliminarProducto] = useMutation(ELIMINAR_PRODUCTO,{\r\n        update(cache){\r\n            const {obtenerProductos} = cache.readQuery({\r\n                query : OBTENER_PRODUCTOS\r\n            });\r\n            cache.writeQuery({\r\n                query : OBTENER_PRODUCTOS,\r\n                data : {\r\n                    obtenerProductos: obtenerProductos.filter(productoActual => productoActual.id !== id)\r\n                }\r\n            })\r\n        }\r\n    });\r\n\r\n    const confirmarEliminarProducto = id => {\r\n        Swal.fire({\r\n            title: `¿Estás seguro de eliminar el producto ${nombre}?`,\r\n            text: \"No se podrá deshacer esta acción\",\r\n            icon: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            confirmButtonText: 'Si, bórralo!',\r\n            cancelButtonText:'No, cancélalo'\r\n          }).then(async (result) => {\r\n            if (result.isConfirmed) \r\n            {\r\n                try {\r\n                    //Eliminar por id \r\n                    //Data es la respuesta del servidor\r\n                    const{data} = await eliminarProducto({\r\n                        variables:{\r\n                            id \r\n                        }\r\n                    })\r\n                    console.log(data)\r\n                    //Mostrar una alerta\r\n                    Swal.fire(\r\n                        'Producto ELiminado!',\r\n                        data.eliminarProducto,\r\n                        'success'\r\n                    )   \r\n                } catch (error) {\r\n                    console.log(error);\r\n                }\r\n            }\r\n          })\r\n    }\r\n\r\n    const editarProducto = ()=>{\r\n        router.push({\r\n            pathname : \"/editarproducto/[id]\",\r\n            query : {}\r\n        })\r\n    }\r\n  return (\r\n    <tr>\r\n        <td className='border px-4 py-2'>{nombre}</td>\r\n        <td className='border px-4 py-2'>{existencia} Piezas</td>\r\n        <td className='border px-4 py-2'>$ {precio}</td>\r\n        <td className='border px-4 py-2'>\r\n            <button type=\"button\"\r\n                className=\"flex justify-center items-center bg-red-800 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold\"\r\n                onClick = {()=>confirmarEliminarProducto(id)}\r\n            >  \r\n                Eliminar       \r\n                <svg className=\"w-4 h-4 ml-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"></path></svg>\r\n            </button>\r\n        </td>\r\n\r\n        <td className='border px-4 py-2'>\r\n            <button type=\"button\"\r\n                className=\"flex justify-center items-center bg-green-600 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold\"\r\n                onClick = {()=>editarProducto(id)}\r\n            >\r\n                Editar\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 ml-2\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\" />\r\n                </svg>    \r\n            </button>\r\n        </td>\r\n    </tr>\r\n  )\r\n}\r\n\r\nexport default Producto"]},"metadata":{},"sourceType":"module"}