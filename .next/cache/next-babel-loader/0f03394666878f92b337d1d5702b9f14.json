{"ast":null,"code":"import _taggedTemplateLiteral from \"D:/Programming/Trabajo/MGRN/EcommercePointi/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    query obtenerUsuario{\\n        obtenerUsuario{\\n            id  \\n            nombre\\n            apellido\\n        }\\n    }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useEffect, useState } from 'react';\nimport { useQuery, gql } from '@apollo/client';\nimport { useRouter } from 'next/router'; //import icon from material-ui\n\nimport { NotificationsNone } from '@material-ui/icons';\nimport { MoreVertOutlined } from '@material-ui/icons';\nimport { useMessages } from '../graphql/hooks';\nvar OBTENER_USUARIO = gql(_templateObject());\n\nvar Header = function Header() {\n  //MENSAJES DEL SERVER POR SUBSCRIPTION\n  var _useMessages = useMessages(),\n      messages = _useMessages.messages; // console.log(\"Mensaje obtenido desde el server\", messages);\n\n\n  useEffect(function () {\n    // messages();\n    return function () {\n      console.log(\"Componente Header desmontado\");\n    };\n  }, [messages]); //Routing \n\n  var router = useRouter(); //Estado para mostrar notificaciones\n\n  var _useState = useState(false),\n      notificaciones = _useState[0],\n      setNotificaciones = _useState[1];\n\n  var _useState2 = useState(false),\n      configuracion = _useState2[0],\n      setConfiguracion = _useState2[1]; //Query de Apollo\n\n\n  var _useQuery = useQuery(OBTENER_USUARIO),\n      data = _useQuery.data,\n      loading = _useQuery.loading,\n      error = _useQuery.error;\n\n  console.log(data);\n  console.log(loading);\n  console.log(error); //Proteger que no accedamos a data antes de tener resultado\n\n  if (loading) return null; //Si no hay datos\n\n  if (!data) {\n    return router.push('/login');\n  } //Destructuramos obtenerUsuario\n\n\n  var _data$obtenerUsuario = data.obtenerUsuario,\n      nombre = _data$obtenerUsuario.nombre,\n      apellido = _data$obtenerUsuario.apellido; //Cerrar SesiÃ³n\n\n  var cerrarSesion = function cerrarSesion() {\n    localStorage.removeItem('token');\n    router.push('/login');\n  };\n\n  return __jsx(\"div\", {\n    className: \"flex justify-between mb-6\"\n  }, __jsx(\"p\", {\n    className: \"mr-2\"\n  }, \"Hola \", nombre, \" \", apellido), __jsx(\"div\", null, __jsx(\"div\", {\n    className: \"relative inline-block text-left mr-2\"\n  }, __jsx(\"div\", null, __jsx(\"button\", {\n    type: \"button\",\n    className: \"inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-indigo-500\",\n    id: \"menu-button\",\n    \"aria-expanded\": \"true\",\n    \"aria-haspopup\": \"true\",\n    onClick: function onClick() {\n      return setNotificaciones(!notificaciones);\n    }\n  }, __jsx(NotificationsNone, null), messages.length > 0 && __jsx(\"span\", {\n    className: \"ml-1\"\n  }, messages.length))), __jsx(\"div\", {\n    className: notificaciones ? \"origin-top-right absolute right-0 mt-2 w-56 h-60 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none overflow-y-auto scrollbar\" : 'hidden',\n    role: \"menu\",\n    \"aria-orientation\": \"vertical\",\n    \"aria-labelledby\": \"menu-button\",\n    tabIndex: \"-1\",\n    onPointerLeave: function onPointerLeave() {\n      return setNotificaciones(!notificaciones);\n    }\n  }, __jsx(\"div\", {\n    className: notificaciones ? \"py-1\" : \"hidden\",\n    role: \"none\"\n  }, messages.map(function (message) {\n    return __jsx(\"div\", {\n      key: message.id,\n      className: \"flex items-center px-4 py-2\"\n    }, __jsx(\"div\", {\n      className: \"flex-shrink-0\"\n    }, __jsx(\"div\", {\n      className: \"flex items-center justify-center h-12 w-12 rounded-md bg-indigo-500 text-white\"\n    }, __jsx(\"svg\", {\n      className: \"h-6 w-6\",\n      fill: \"none\",\n      viewBox: \"0 0 24 24\",\n      stroke: \"currentColor\"\n    }, __jsx(\"path\", {\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      strokeWidth: \"2\",\n      d: \"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a1 1 0 012 0v3.158a2.032 2.032 0 01-1.095 1.396L15 17z\"\n    }), __jsx(\"path\", {\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      strokeWidth: \"2\",\n      d: \"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n    })))), __jsx(\"div\", {\n      className: \"ml-3\"\n    }, __jsx(\"p\", {\n      className: \"text-sm leading-5 font-medium text-gray-900\"\n    }, message.text)));\n  })))), __jsx(\"div\", {\n    className: \"relative inline-block text-left\"\n  }, __jsx(\"div\", null, __jsx(\"button\", {\n    type: \"button\",\n    className: \"inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-indigo-500\",\n    id: \"menu-button\",\n    \"aria-expanded\": \"true\",\n    \"aria-haspopup\": \"true\",\n    onClick: function onClick() {\n      return setConfiguracion(!configuracion);\n    } // onClick={()=>cerrarSesion()}\n\n  }, __jsx(MoreVertOutlined, null))), __jsx(\"div\", {\n    className: configuracion ? \"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none\" : 'hidden',\n    role: \"menu\",\n    \"aria-orientation\": \"vertical\",\n    \"aria-labelledby\": \"menu-button\",\n    tabIndex: \"-1\",\n    onPointerLeave: function onPointerLeave() {\n      return setConfiguracion(!configuracion);\n    }\n  }, __jsx(\"div\", {\n    className: configuracion ? \"py-1\" : \"hidden\",\n    role: \"none\"\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"text-gray-700 block px-4 py-2 text-sm\",\n    role: \"menuitem\",\n    tabIndex: \"-1\",\n    id: \"menu-item-0\"\n  }, \"Account settings\"), __jsx(\"a\", {\n    href: \"#\",\n    className: \"text-gray-700 block px-4 py-2 text-sm\",\n    role: \"menuitem\",\n    tabIndex: \"-1\",\n    id: \"menu-item-1\"\n  }, \"Support\"), __jsx(\"a\", {\n    href: \"#\",\n    className: \"text-gray-700 block px-4 py-2 text-sm\",\n    role: \"menuitem\",\n    tabIndex: \"-1\",\n    id: \"menu-item-2\"\n  }, \"License\"), __jsx(\"button\", {\n    className: \"text-gray-700 block w-full text-left px-4 py-2 text-sm\",\n    role: \"menuitem\",\n    tabIndex: \"-1\",\n    id: \"menu-item-3\",\n    onClick: function onClick() {\n      return cerrarSesion();\n    }\n  }, \"Cerrar sesi\\xF3n\"))))));\n};\n\nexport default Header;","map":null,"metadata":{},"sourceType":"module"}