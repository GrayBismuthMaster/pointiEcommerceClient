{"ast":null,"code":"var __jsx = React.createElement;\nimport React from 'react';\nimport Swal from 'sweetalert2';\nimport { gql, useMutation } from '@apollo/client';\nimport Router from 'next/router';\nconst ELIMINAR_CLIENTE = gql`\n    mutation eliminarCliente($id:ID!){\n        eliminarCliente(id:$id)\n    }\n`;\nconst OBTENER_CLIENTES_USUARIO = gql`\n      query obtenerClientesVendedor {\n        obtenerClientesVendedor{\n          id\n          nombre\n          apellido\n          empresa\n          email\n        }\n      }\n`;\n\nconst Cliente = ({\n  cliente\n}) => {\n  //Mutation para eliminar cliente\n  const [eliminarCliente] = useMutation(ELIMINAR_CLIENTE, {\n    update(cache) {\n      //Obtener una copia del objeto de cache\n      const {\n        obtenerClientesVendedor\n      } = cache.readQuery({\n        query: OBTENER_CLIENTES_USUARIO\n      }); //Reescribir el caché \n\n      cache.writeQuery({\n        query: OBTENER_CLIENTES_USUARIO,\n        data: {\n          obtenerClientesVendedor: obtenerClientesVendedor.filter(clienteActual => clienteActual.id !== id)\n        }\n      });\n    }\n\n  }); //Destructuración  cliente\n\n  const {\n    nombre,\n    apellido,\n    empresa,\n    email,\n    id\n  } = cliente; //Elimina un cliente\n\n  const confirmarEliminarCliente = id => {\n    Swal.fire({\n      title: `¿Estás seguro de eliminar a ${nombre}?`,\n      text: \"No se podrá deshacer esta acción\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Si, bórralo!',\n      cancelButtonText: 'No, cancélalo'\n    }).then(async result => {\n      if (result.isConfirmed) {\n        try {\n          //Eliminar por id \n          //Data es la respuesta del servidor\n          const {\n            data\n          } = await eliminarCliente({\n            variables: {\n              id\n            }\n          });\n          console.log(data); //Mostrar una alerta\n\n          Swal.fire('ELiminado!', data.eliminarCliente, 'success');\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    });\n  };\n\n  const editarCliente = () => {\n    Router.push({\n      pathname: \"/editarCliente/[id]\",\n      query: {\n        id\n      }\n    });\n  };\n\n  return __jsx(\"tr\", null, __jsx(\"td\", {\n    className: \"border px-4 py-2\"\n  }, nombre, \" \", apellido), __jsx(\"td\", {\n    className: \"border px-4 py-2\"\n  }, empresa), __jsx(\"td\", {\n    className: \"border px-4 py-2\"\n  }, email), __jsx(\"td\", {\n    className: \"border px-4 py-2\"\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"flex justify-center items-center bg-red-800 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold\",\n    onClick: () => confirmarEliminarCliente(id)\n  }, \"Eliminar\", __jsx(\"svg\", {\n    className: \"w-4 h-4 ml-2\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: \"2\",\n    d: \"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"\n  })))), __jsx(\"td\", {\n    className: \"border px-4 py-2\"\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"flex justify-center items-center bg-green-600 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold\",\n    onClick: () => editarCliente(id)\n  }, \"Editar\", __jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"h-4 w-4 ml-2\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\"\n  }, __jsx(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\"\n  })))));\n};\n\nexport default Cliente;","map":null,"metadata":{},"sourceType":"module"}