{"ast":null,"code":"import _regeneratorRuntime from \"D:/Programming/Trabajo/MGRN/EcommercePointi/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/Programming/Trabajo/MGRN/EcommercePointi/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:/Programming/Trabajo/MGRN/EcommercePointi/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"D:/Programming/Trabajo/MGRN/EcommercePointi/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    query obtenerProductos{\\n        obtenerProductos{\\n            id\\n            nombre\\n            precio\\n            existencia\\n        }\\n    }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    mutation eliminarProducto($id : ID!) {\\n        eliminarProducto(id : $id)\\n    }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport { gql, useMutation } from '@apollo/client';\nimport router from 'next/router';\nimport React from 'react';\nimport Swal from 'sweetalert2';\nvar ELIMINAR_PRODUCTO = gql(_templateObject());\nvar OBTENER_PRODUCTOS = gql(_templateObject2());\n\nvar Producto = function Producto(_ref) {\n  var producto = _ref.producto;\n  var id = producto.id,\n      nombre = producto.nombre,\n      precio = producto.precio,\n      existencia = producto.existencia; //Mutation para eliminar productos\n\n  var _useMutation = useMutation(ELIMINAR_PRODUCTO, {\n    update: function update(cache) {\n      var _cache$readQuery = cache.readQuery({\n        query: OBTENER_PRODUCTOS\n      }),\n          obtenerProductos = _cache$readQuery.obtenerProductos;\n\n      cache.writeQuery({\n        query: OBTENER_PRODUCTOS,\n        data: {\n          obtenerProductos: obtenerProductos.filter(function (productoActual) {\n            return productoActual.id !== id;\n          })\n        }\n      });\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      eliminarProducto = _useMutation2[0];\n\n  var confirmarEliminarProducto = function confirmarEliminarProducto(id) {\n    Swal.fire({\n      title: \"\\xBFEst\\xE1s seguro de eliminar el producto \".concat(nombre, \"?\"),\n      text: \"No se podrá deshacer esta acción\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Si, bórralo!',\n      cancelButtonText: 'No, cancélalo'\n    }).then( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(result) {\n        var _yield$eliminarProduc, data;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!result.isConfirmed) {\n                  _context.next = 13;\n                  break;\n                }\n\n                _context.prev = 1;\n                _context.next = 4;\n                return eliminarProducto({\n                  variables: {\n                    id: id\n                  }\n                });\n\n              case 4:\n                _yield$eliminarProduc = _context.sent;\n                data = _yield$eliminarProduc.data;\n                console.log(data); //Mostrar una alerta\n\n                Swal.fire('Producto ELiminado!', data.eliminarProducto, 'success');\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](1);\n                console.log(_context.t0);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 10]]);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n  };\n\n  var editarProducto = function editarProducto() {\n    router.push({\n      pathname: \"/editarProducto/[id]\",\n      query: {\n        id: id\n      }\n    });\n  };\n\n  return __jsx(\"tr\", null, __jsx(\"td\", {\n    className: \"border px-4 py-2\"\n  }, nombre), __jsx(\"td\", {\n    className: \"border px-4 py-2\"\n  }, existencia, \" Piezas\"), __jsx(\"td\", {\n    className: \"border px-4 py-2\"\n  }, \"$ \", precio), __jsx(\"td\", {\n    className: \"border px-4 py-2\"\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"flex justify-center items-center bg-red-800 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold\",\n    onClick: function onClick() {\n      return confirmarEliminarProducto(id);\n    }\n  }, \"Eliminar\", __jsx(\"svg\", {\n    className: \"w-4 h-4 ml-2\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    viewBox: \"0 0 24 24\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: \"2\",\n    d: \"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"\n  })))), __jsx(\"td\", {\n    className: \"border px-4 py-2\"\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"flex justify-center items-center bg-green-600 py-2 px-4 w-full text-white rounded text-xs uppercase font-bold\",\n    onClick: function onClick() {\n      return editarProducto(id);\n    }\n  }, \"Editar\", __jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    className: \"h-4 w-4 ml-2\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\"\n  }, __jsx(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\"\n  })))));\n};\n\nexport default Producto;","map":null,"metadata":{},"sourceType":"module"}